# ××“×¨×™×š ×”×ª×§× ×” - Supabase

## ×ª×•×›×Ÿ ×¢× ×™×™× ×™×

- [×“×¨×™×©×•×ª ××§×“×™××•×ª](#×“×¨×™×©×•×ª-××§×“×™××•×ª)
- [×”×ª×§× ×” ××”×™×¨×”](#×”×ª×§× ×”-××”×™×¨×”)
- [×”×›× ×” ×œ×¤× ×™ ×”×”×ª×§× ×”](#×”×›× ×”-×œ×¤× ×™-×”×”×ª×§× ×”)
- [×ª×”×œ×™×š ×”×”×ª×§× ×”](#×ª×”×œ×™×š-×”×”×ª×§× ×”)
- [××—×¨×™ ×”×”×ª×§× ×”](#××—×¨×™-×”×”×ª×§× ×”)
- [×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª](#×¤×ª×¨×•×Ÿ-×‘×¢×™×•×ª)

---

## ×“×¨×™×©×•×ª ××§×“×™××•×ª

### ×©×¨×ª

- ××¢×¨×›×ª ×”×¤×¢×œ×”: Ubuntu 20.04+ / Debian 11+ / CentOS 8+
- ×–×™×›×¨×•×Ÿ RAM: ××™× ×™××•× 4GB (××•××œ×¥ 8GB+)
- ××¢×‘×“: ××™× ×™××•× 2 ×œ×™×‘×•×ª (××•××œ×¥ 4+)
- ×©×˜×— ×“×™×¡×§: ××™× ×™××•× 20GB ×¤× ×•×™×™×
- ×’×™×©×ª root ×œ×©×¨×ª

### ×¨×©×ª

- ×“×•××™×™×Ÿ ×¢× ×¨×©×•××ª A ×”××¦×‘×™×¢×” ×œ×›×ª×•×‘×ª IP ×©×œ ×”×©×¨×ª
- ×¤×•×¨×˜×™× ×¤×ª×•×—×™×:
  - 22 (××• ×¤×•×¨×˜ SSH ××•×ª×× ××™×©×™×ª)
  - 80 (HTTP)
  - 443 (HTTPS)
  - 5432 (PostgreSQL - ××•×¤×¦×™×•× ×œ×™)

### ×›×œ×™× ×‘××—×©×‘ ×”××§×•××™ ×©×œ×š

- Terminal (Linux/Mac) ××• PowerShell/WSL (Windows)
- SSH client

---

## ×”×ª×§× ×” ××”×™×¨×”

```bash
# ×”×•×¨×“ ××ª ×”×¤×¨×•×™×™×§×˜
git clone https://github.com/YOUR_USERNAME/supabase-installer.git
cd supabase-installer

# ×”×¨×¥ ××ª ×¡×§×¨×™×¤×˜ ×”×”×ª×§× ×”
sudo bash install.sh
```

---

## ×”×›× ×” ×œ×¤× ×™ ×”×”×ª×§× ×”

### 1. ×™×¦×™×¨×ª ××¤×ª×— SSH

×‘××—×©×‘ ×”××§×•××™ ×©×œ×š, ×¤×ª×— terminal ×•×”×¨×¥:

```bash
ssh-keygen -t ed25519 -f ~/.ssh/supabase-prod -C "your@email.com"
```

×œ×—×¥ Enter ×¤×¢××™×™× (×œ×œ× passphrase).

### 2. ×”×¦×’×ª ×”××¤×ª×— ×”×¦×™×‘×•×¨×™

```bash
cat ~/.ssh/supabase-prod.pub
```

×”×¢×ª×§ ××ª ×›×œ ×”×ª×•×›×Ÿ (××ª×—×™×œ ×‘-`ssh-ed25519...`).

### 3. ×”×›× ×ª ×¤×¨×˜×™× × ×•×¡×¤×™×

×œ×¤× ×™ ×©××ª×—×™×œ×™× ××ª ×”×”×ª×§× ×”, ×”×›×Ÿ:

- âœ… ×“×•××™×™×Ÿ (×œ×“×•×’××”: `supabase.example.com`)
- âœ… ×›×ª×•×‘×ª ××™××™×™×œ (×œ×ª×¢×•×“×ª SSL)
- âœ… ××¤×ª×— Tailscale (××•×¤×¦×™×•× ×œ×™ - ×× ×¨×•×¦×™× VPN ×¤×¨×˜×™)

---

## ×ª×”×œ×™×š ×”×”×ª×§× ×”

### ×©×œ×‘ 1: ×”×ª×—×‘×¨×•×ª ×œ×©×¨×ª

```bash
ssh root@YOUR_SERVER_IP
```

### ×©×œ×‘ 2: ×”×•×¨×“×ª ×”×¡×§×¨×™×¤×˜

```bash
git clone https://github.com/YOUR_USERNAME/supabase-installer.git
cd supabase-installer
```

### ×©×œ×‘ 3: ×”×¨×¦×ª ×”×”×ª×§× ×”

```bash
sudo bash install.sh
```

### ×©×œ×‘ 4: ××¢× ×” ×œ×©××œ×•×ª

×”×¡×§×¨×™×¤×˜ ×™×©××œ ××•×ª×š ××¡×¤×¨ ×©××œ×•×ª:

1. **×”×× ×™×¦×¨×ª ××¤×ª×— SSH?** - ×¢× ×” `y`
2. **×©× ×”××¤×ª×—** - ×œ×“×•×’××”: `supabase-prod`
3. **×”××¤×ª×— ×”×¦×™×‘×•×¨×™** - ×”×“×‘×§ ××ª ×”××¤×ª×— ×©×”×¢×ª×§×ª
4. **×“×•××™×™×Ÿ** - ×œ×“×•×’××”: `supabase.example.com`
5. **××™××™×™×œ** - ×œ×“×•×’××”: `admin@example.com`
6. **×ª×™×§×™×™×ª ×”×ª×§× ×”** - Enter ×œ×‘×¨×™×¨×ª ××—×“×œ (`/opt/supabase`)
7. **×¤×•×¨×˜ SSH** - Enter ×œ×‘×¨×™×¨×ª ××—×“×œ (22) ××• ×¤×•×¨×˜ ××•×ª×× ××™×©×™×ª
8. **×¤×•×¨×˜ PostgreSQL** - Enter ×œ×‘×¨×™×¨×ª ××—×“×œ (5432)
9. **×”×ª×§× ×ª Tailscale?** - `y` ××• `n`

### ×©×œ×‘ 5: ×”××ª×Ÿ ×œ×”×ª×§× ×”

×”×”×ª×§× ×” ××•×¨×›×ª ×‘×™×Ÿ 10-20 ×“×§×•×ª, ×ª×œ×•×™ ×‘××”×™×¨×•×ª ×”××™× ×˜×¨× ×˜ ×•×‘××©××‘×™ ×”×©×¨×ª.

---

## ××—×¨×™ ×”×”×ª×§× ×”

### ×’×™×©×” ×œ××¢×¨×›×ª

1. **Dashboard**:
   ```
   https://your-domain.com
   ××©×ª××©: admin
   ×¡×™×¡××”: [× ×©××¨ ×‘×§×•×‘×¥ CREDENTIALS.txt]
   ```

2. **SSH ×—×“×©**:
   ```bash
   ssh -i ~/.ssh/supabase-prod -p YOUR_SSH_PORT root@YOUR_SERVER_IP
   ```

### ×§×‘×¦×™× ×—×©×•×‘×™×

- **×¤×¨×˜×™ ×’×™×©×”**: `/opt/supabase/CREDENTIALS.txt`
- **×”×’×“×¨×•×ª Supabase**: `/opt/supabase/supabase/docker/.env`
- **Docker Compose**: `/opt/supabase/supabase/docker/docker-compose.yml`

### ×¤×§×•×“×•×ª ×©×™××•×©×™×•×ª

```bash
# ×¢×‘×•×¨ ×œ×ª×™×§×™×™×ª Supabase
cd /opt/supabase/supabase/docker

# ×‘×“×™×§×ª ×¡×˜×˜×•×¡
docker-compose ps

# ×¦×¤×™×™×” ×‘×œ×•×’×™×
docker-compose logs -f

# ×¨×¡×˜××¨×˜ ×©×™×¨×•×ª ××¡×•×™×
docker-compose restart kong

# ×¨×¡×˜××¨×˜ ×›×œ ×”×©×™×¨×•×ª×™×
docker-compose restart

# ×¢×¦×™×¨×ª ×”××¢×¨×›×ª
docker-compose down

# ×”×¤×¢×œ×ª ×”××¢×¨×›×ª
docker-compose up -d
```

---

## ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

### ×‘×¢×™×”: ×œ× ××¦×œ×™×— ×œ×”×ª×—×‘×¨ ×‘-SSH ×œ××—×¨ ×”×”×ª×§× ×”

**×¤×ª×¨×•×Ÿ**:
```bash
# ×•×“× ×©××ª×” ××©×ª××© ×‘×¤×•×¨×˜ ×”× ×›×•×Ÿ ×•×‘××¤×ª×— ×”× ×›×•×Ÿ
ssh -i ~/.ssh/supabase-prod -p YOUR_SSH_PORT root@YOUR_SERVER_IP

# ×× ×©×›×—×ª ××ª ×”×¤×•×¨×˜, ×—×‘×¨ ××”×—×œ×•×Ÿ ×”×™×©×Ÿ ×©×¢×“×™×™×Ÿ ×¤×ª×•×— ×•×‘×“×•×§:
grep "^Port" /etc/ssh/sshd_config
```

### ×‘×¢×™×”: Dashboard ×œ× × ×’×™×©

**×‘×“×™×§×•×ª**:

1. ×‘×“×•×§ ×©×›×œ ×”×©×™×¨×•×ª×™× ×¨×¦×™×:
   ```bash
   cd /opt/supabase/supabase/docker
   docker-compose ps
   ```

2. ×‘×“×•×§ ××ª ×”×œ×•×’×™× ×©×œ Kong:
   ```bash
   docker-compose logs kong
   ```

3. ×‘×“×•×§ ×©Nginx ×¨×¥:
   ```bash
   systemctl status nginx
   ```

### ×‘×¢×™×”: ×©×’×™××ª SSL

**×¤×ª×¨×•×Ÿ**:

×× ×ª×¢×•×“×ª SSL × ×›×©×œ×”, ×”××¢×¨×›×ª ×”×ª×§×™× ×” ×‘××¦×‘ HTTP. × ×™×ª×Ÿ ×œ×§×‘×œ SSL ×××•×—×¨ ×™×•×ª×¨:

```bash
# ×¢×¦×•×¨ Nginx
systemctl stop nginx

# ×§×‘×œ ×ª×¢×•×“×”
certbot certonly --standalone -d your-domain.com

# ×¢×¨×•×š ××ª Nginx ×œ×”×©×ª××© ×‘-SSL
nano /etc/nginx/sites-available/supabase

# ×”×¤×¢×œ Nginx
systemctl start nginx
```

### ×‘×¢×™×”: ×©×™×¨×•×ª ××¡×•×™× ×œ× ×¨×¥

**×¤×ª×¨×•×Ÿ**:

```bash
cd /opt/supabase/supabase/docker

# ×¨×¡×˜××¨×˜ ×œ×©×™×¨×•×ª ×”×¡×¤×¦×™×¤×™
docker-compose restart SERVICE_NAME

# ×œ×“×•×’××”:
docker-compose restart storage
docker-compose restart kong
```

### ×‘×¢×™×”: ×©×›×—×ª×™ ××ª ×”×¡×™×¡×××•×ª

**×¤×ª×¨×•×Ÿ**:

×›×œ ×”×¡×™×¡×××•×ª ×•×”××¤×ª×—×•×ª ×©××•×¨×™× ×‘×§×•×‘×¥:
```bash
cat /opt/supabase/CREDENTIALS.txt
```

---

## ×ª×™×§×•×Ÿ Supavisor

×”×¡×§×¨×™×¤×˜ ×›×•×œ×œ ×ª×™×§×•×Ÿ ××•×˜×•××˜×™ ×œ×‘×¢×™×” ×”×™×“×•×¢×” ×©×œ Supavisor ×©×× ×¡×” ×œ×ª×¤×•×¡ ××ª ×¤×•×¨×˜ 5432 ×‘××§×•× ×”-DB.

×”×ª×™×§×•×Ÿ:
- âœ… ××¡×™×¨ ××ª ×”-ports mapping ×-Supavisor
- âœ… ××•×¡×™×£ ports ×œ-DB ×¢×œ ×”×¤×•×¨×˜ ×”× ×›×•×Ÿ
- âœ… ××•×•×“× ×©××™×Ÿ ×§×•× ×¤×œ×™×§×˜ ×‘×™×Ÿ ×”×©×™×¨×•×ª×™×

---

## Tailscale (VPN ×¤×¨×˜×™)

×× ×”×ª×§× ×ª Tailscale, ×ª×•×›×œ ×œ×”×ª×—×‘×¨ ×œ×©×¨×ª ×“×¨×š ×”-VPN ×”×¤×¨×˜×™ ×©×œ×š:

```bash
# ×—×™×‘×•×¨ SSH ×“×¨×š Tailscale
ssh -i ~/.ssh/supabase-prod -p YOUR_SSH_PORT root@TAILSCALE_IP

# ×—×™×‘×•×¨ ×œ××¡×“ × ×ª×•× ×™× ×“×¨×š Tailscale
psql -h TAILSCALE_IP -p 5432 -U postgres -d postgres
```

×”×™×ª×¨×•× ×•×ª:
- ğŸ”’ ×—×™×‘×•×¨ ××•×¦×¤×Ÿ ××›×œ ××§×•×
- ğŸš« ××™×Ÿ ×¦×•×¨×š ×œ×—×©×•×£ ×¤×•×¨×˜×™× × ×•×¡×¤×™× ×‘××™× ×˜×¨× ×˜
- âš¡ ×‘×™×¦×•×¢×™× ××¢×•×œ×™×

---

## ××‘×˜×—×”

### ××” ×”×¡×§×¨×™×¤×˜ ××’×“×™×¨ ××•×˜×•××˜×™×ª:

- âœ… SSH ×¢× ××¤×ª×— ×‘×œ×‘×“ (×¡×™×¡×××•×ª ××•×©×‘×ª×•×ª)
- âœ… UFW (×—×•××ª ××©)
- âœ… Fail2Ban (×”×’× ×” ××¤× ×™ ×”×ª×§×¤×•×ª brute-force)
- âœ… SSL/TLS (×ª×¢×•×“×ª Let's Encrypt)
- âœ… ×¡×™×¡×××•×ª ×—×–×§×•×ª ××§×¨××™×•×ª
- âœ… JWT tokens ×™×™×—×•×“×™×™×

### ×”××œ×¦×•×ª × ×•×¡×¤×•×ª:

1. **×’×™×‘×•×™×™× ×§×‘×•×¢×™×**:
   ```bash
   # ×’×™×‘×•×™ ××¡×“ ×”× ×ª×•× ×™×
   docker exec supabase-db pg_dump -U postgres postgres > backup.sql
   ```

2. **×¢×“×›×•× ×™ ××‘×˜×—×”**:
   ```bash
   apt update && apt upgrade -y
   ```

3. **× ×™×˜×•×¨ ×œ×•×’×™×**:
   ```bash
   # SSH
   tail -f /var/log/auth.log

   # Nginx
   tail -f /var/log/nginx/error.log
   ```

---

## ×ª××™×›×”

×× × ×ª×§×œ×ª ×‘×‘×¢×™×•×ª:

1. ×‘×“×•×§ ××ª ×”×œ×•×’×™× ×©×œ Docker: `docker-compose logs -f`
2. ×‘×“×•×§ ××ª ×œ×•×’×™ ×”××¢×¨×›×ª: `journalctl -xe`
3. ×¤×ª×— issue ×‘-GitHub

---

## ×¨×™×©×™×•×Ÿ

MIT License - ×¨××” ×§×•×‘×¥ LICENSE ×œ×¤×¨×˜×™×.
